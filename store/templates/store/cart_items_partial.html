{% load static %}

{% if cart_items %}
    <ul class="header-cart-wrapitem w-full">
        {% for item in cart_items %}
            <li class="header-cart-item flex-w flex-t m-b-12" data-item-id="{{ item.id }}">
                <div class="header-cart-item-img" style="cursor:pointer;" onclick="removeFromCart({{ item.id }})">
                    <img src="{{ item.couleur.images.first.image.url|default:item.produit.image.url }}" alt="IMG">
                </div>

                <div class="header-cart-item-txt p-t-8">
                    <a href="{% url 'product_detail' item.produit.id %}"
                       class="header-cart-item-name m-b-18 hov-cl1 trans-04">
                        {{ item.produit.nom }}
                    </a>

                    <span class="header-cart-item-info">
                        {{ item.quantite }} × {{ item.produit.prix }} دج
                    </span>

                    {% if item.taille %}
                        <div class="fs-13 text-secondary">
                            <small>المقاس: {{ item.taille }}</small>
                        </div>
                    {% endif %}
                    <div class="fs-13 text-muted">
                        <small>اللون: {{ item.couleur.couleur }}</small>
                    </div>
                </div>
            </li>
        {% endfor %}
    </ul>

    <div class="w-full">
        <div class="header-cart-total w-full p-tb-20">
            المجموع: {{ total }} دج
        </div>

        <div class="header-cart-buttons flex-w w-full">
            <a href="{% url 'afficher_panier' %}"
               class="flex-c-m stext-101 cl0 size-107 bg3 bor2 hov-btn3 p-lr-15 trans-04 m-r-8 m-b-10">
                عرض السلة
            </a>

            <a href="{% url 'panier_view' %}"
               class="flex-c-m stext-101 cl0 size-107 bg1 bor2 hov-btn1 p-lr-15 trans-04 m-b-10">
                تأكيد الطلب
            </a>
        </div>
    </div>
{% else %}
    <div class="p-4 text-center">
        🛒 السلة فارغة حالياً
    </div>
{% endif %}
